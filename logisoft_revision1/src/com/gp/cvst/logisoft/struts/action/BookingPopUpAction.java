/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package com.gp.cvst.logisoft.struts.action;

import java.util.ArrayList;
import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;



import com.gp.cong.logisoft.util.CommonFunctions;
import com.gp.cvst.logisoft.domain.BookingPopUp;
import com.gp.cvst.logisoft.struts.form.BookingPopUpForm;

/** 
 * MyEclipse Struts
 * Creation date: 09-04-2008
 * 
 * XDoclet definition:
 * @struts.action path="/bookingPopUp" name="bookingPopUpForm" input="/jsps/fclQuotes/bookingPopUp.jsp" scope="request" validate="true"
 */
public class BookingPopUpAction extends Action {
	/*
	 * Generated Methods
	 */

	/** 
	 * Method execute
	 * @param mapping
	 * @param form
	 * @param request
	 * @param response
	 * @return ActionForward
	 */
	public ActionForward execute(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) {
		BookingPopUpForm bookingPopUpForm = (BookingPopUpForm) form;
		BookingPopUp book=new BookingPopUp();
		List bookin=null;
	    HttpSession session = ((HttpServletRequest)request).getSession();
		String buttonValue=bookingPopUpForm.getButtonValue();
		String[] sellrate=bookingPopUpForm.getSellrate();
		String[] buyRate=bookingPopUpForm.getBuyRate();
		String[] comments=bookingPopUpForm.getComments();
		String[] chargecode=bookingPopUpForm.getChargecode();
		if(buttonValue.equals("popup"))
		{  
			chargecode=bookingPopUpForm.getChargecode();
			
		}
		
		if(buttonValue.equals("add"))
		{ 
			if(session.getAttribute("book1")!=null)
			{
				List bookList=(List)session.getAttribute("book1");
				for(int i=0;i<bookList.size();i++)
				{   
					BookingPopUp b1=(BookingPopUp)bookList.get(i);
				   b1.setSellrate(Double.parseDouble(sellrate[i]));
				   b1.setBuyRate(Double.parseDouble(buyRate[i]));
				   b1.setComments(CommonFunctions.isNotNull(comments[i])?
						   comments[i].toUpperCase(): comments[i]);
			  	 
					b1.setChargeCode(chargecode[i]);
				
				
				
				}
				BookingPopUp book1=new BookingPopUp();
				book1.setSellrate(0.00);
				book1.setBuyRate(0.00);
			    book1.setChargeCode("");
				book1.setComments("");
				bookList.add(book1);
			
			}
		}

		// TODO Auto-generated method stub
		return mapping.findForward("success");
	}
}