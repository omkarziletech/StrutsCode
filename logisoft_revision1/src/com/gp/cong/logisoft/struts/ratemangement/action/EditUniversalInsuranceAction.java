/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package com.gp.cong.logisoft.struts.ratemangement.action;

import java.util.ArrayList;
import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

import com.gp.cong.logisoft.domain.GenericCode;
import com.gp.cong.logisoft.domain.UniverseInsuranceChrg;
import com.gp.cong.logisoft.hibernate.dao.GenericCodeDAO;
import com.gp.cong.logisoft.struts.ratemangement.form.EditUniversalInsuranceForm;

/** 
 * MyEclipse Struts
 * Creation date: 07-31-2008
 * 
 * XDoclet definition:
 * @struts.action path="/editUniversalInsurance" name="editUniversalInsuranceForm" input="jsps/ratemanagement/editUniversalInsurance.jsp" scope="request"
 */
public class EditUniversalInsuranceAction extends Action {
    /*
     * Generated Methods
     */

    /**
     * Method execute
     * @param mapping
     * @param form
     * @param request
     * @param response
     * @return ActionForward
     */
    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response) {
        EditUniversalInsuranceForm editUniversalInsuranceForm = (EditUniversalInsuranceForm) form;// TODO Auto-generated method stub
        String insurance = editUniversalInsuranceForm.getAmount();
        String button = editUniversalInsuranceForm.getButtonValue();
        String pervalue = editUniversalInsuranceForm.getPervalue();
        HttpSession session = ((HttpServletRequest) request).getSession();
        String forwardName = null;
        String FORWORD = "";
        GenericCode genObj = new GenericCode();
        UniverseInsuranceChrg edituniverseInsuranceChrg = new UniverseInsuranceChrg();
        GenericCodeDAO genericCodeDAO = new GenericCodeDAO();
        List uniAirFright = null;
        List airList = new ArrayList();
        List reoveList = new ArrayList();

        int k = 0;
        if (session.getAttribute("ind") != null) {


            Integer index = (Integer) session.getAttribute("ind");
            k = index.intValue();
        }
        if (button != null && button.equals("add")) {
            if (session.getAttribute("edituniinsurance") != null) {
                edituniverseInsuranceChrg = (UniverseInsuranceChrg) session.getAttribute("edituniinsurance");
            }
            if (pervalue != null && !pervalue.equals("")) {
                edituniverseInsuranceChrg.setPerValue(Double.parseDouble(pervalue));
            } else {
                edituniverseInsuranceChrg.setPerValue(0.00);
            }
            if (insurance != null && !insurance.equals("")) {
                edituniverseInsuranceChrg.setInsuranceAmount(Double.parseDouble(insurance));
            } else {
                edituniverseInsuranceChrg.setInsuranceAmount(0.00);
            }

            if (session.getAttribute("uniinsurancelist") != null) {
                airList = (List) session.getAttribute("uniinsurancelist");
                for (int i = 0; i < airList.size(); i++) {

                    if (i == k) {
                        airList.set(i, edituniverseInsuranceChrg);
                        break;
                    }

                }

                session.setAttribute("uniinsurancelist", airList);
            }
            if (session.getAttribute("ind") != null) {
                session.removeAttribute("ind");
            }
        }
        if (button != null && button.equals("delete")) {
            if (session.getAttribute("edituniinsurance") != null) {
                edituniverseInsuranceChrg = (UniverseInsuranceChrg) session.getAttribute("edituniinsurance");
            }

            if (session.getAttribute("uniinsurancelist") != null) {
                airList = (List) session.getAttribute("uniinsurancelist");
                for (int i = 0; i < airList.size(); i++) {
                    if (i == k) {
                        airList.remove(edituniverseInsuranceChrg);
                        break;
                    }
                }

                session.setAttribute("uniinsurancelist", airList);
            }
            if (session.getAttribute("ind") != null) {
                session.removeAttribute("ind");
            }
        }
        if (button != null && button.equals("cancel")) {
            if (session.getAttribute("edituniinsurance") != null) {
                session.removeAttribute("edituniinsurance");
            }
            if (session.getAttribute("ind") != null) {
                session.removeAttribute("ind");
            }
        }

        FORWORD = "uniinsuAdd";
        return mapping.findForward(FORWORD);
    }
}