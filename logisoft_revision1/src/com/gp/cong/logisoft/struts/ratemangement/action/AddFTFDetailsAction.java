/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package com.gp.cong.logisoft.struts.ratemangement.action;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

import com.gp.cong.logisoft.beans.AirRatesBean;
import com.gp.cong.logisoft.domain.FTFDetails;
import com.gp.cong.logisoft.domain.User;
import com.gp.cong.logisoft.struts.ratemangement.form.AddFTFDetailsForm;

/** 
 * MyEclipse Struts
 * Creation date: 06-24-2008
 * 
 * XDoclet definition:
 * @struts.action path="/addFTFDetails" name="addFTFDetailsForm" input="/jsps/ratemanagement/addFTFDetails.jsp" scope="request" validate="true"
 */
public class AddFTFDetailsAction extends Action {
    /*
     * Generated Methods
     */

    /**
     * Method execute
     * @param mapping
     * @param form
     * @param request
     * @param response
     * @return ActionForward
     */
    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response) throws Exception {
        AddFTFDetailsForm addFTFDetailsForm = (AddFTFDetailsForm) form;// TODO Auto-generated method stub
        List lclColoadList = new ArrayList();
        java.util.Date javaDate = null;
        HttpSession session = ((HttpServletRequest) request).getSession();
        String buttonValue = addFTFDetailsForm.getButtonValue();
        String metric = addFTFDetailsForm.getMetric();
        String rate1000kgs = addFTFDetailsForm.getRate1000kgs();
        String rateCbm = addFTFDetailsForm.getRateCbm();
        String ofMinAmtMetric = addFTFDetailsForm.getOfMinAmtMetric();
        String ofMinAmtEnglish = addFTFDetailsForm.getOfMinAmtEnglish();
        String rate100 = addFTFDetailsForm.getRate100lb();
        String rateCft = addFTFDetailsForm.getRateCft();
        String oceanFreightA = addFTFDetailsForm.getOceanFreightA();
        String ttA = addFTFDetailsForm.getTtA();
        String oceanFreightB = addFTFDetailsForm.getOceanFreightB();
        String ttB = addFTFDetailsForm.getTtB();
        String oceanFreightC = addFTFDetailsForm.getOceanFreightC();
        String ttc = addFTFDetailsForm.getTtC();
        String oceanFreightD = addFTFDetailsForm.getOceanFreightD();
        String ttd = addFTFDetailsForm.getTtD();
        AirRatesBean airRatesBean = new AirRatesBean();
        FTFDetails ftfDetails = null;

        if (session.getAttribute("ftfdetails") != null) {
            ftfDetails = (FTFDetails) session.getAttribute("ftfdetails");

        } else {

            ftfDetails = new FTFDetails();
        }
        ftfDetails.setMeasureType(metric);
        if (rate1000kgs != null && !rate1000kgs.equals("")) {
            ftfDetails.setMetric1000kg(new Double(rate1000kgs));
        }
        if (rateCbm != null && !rateCbm.equals("")) {
            ftfDetails.setMetricCbm(new Double(rateCbm));
        }
        if (ofMinAmtMetric != null && !ofMinAmtMetric.equals("")) {
            ftfDetails.setMetricOfMinamt(new Double(ofMinAmtMetric));
        }
        if (ofMinAmtEnglish != null && !ofMinAmtEnglish.equals("")) {
            ftfDetails.setEnglishOfMinamt(new Double(ofMinAmtEnglish));
        }
        if (rate100 != null && !rate100.equals("")) {
            ftfDetails.setEnglish100lb(new Double(rate100));
        }
        if (rateCft != null && !rateCft.equals("")) {
            ftfDetails.setEnglishCft(new Double(rateCft));
        }
        if (oceanFreightA != null && !oceanFreightA.equals("")) {
            ftfDetails.setSizeAOf(new Double(oceanFreightA));
        }
        if (ttA != null && !ttA.equals("")) {
            ftfDetails.setSizeATt(new Double(ttA));
        }
        if (oceanFreightB != null && !oceanFreightB.equals("")) {
            ftfDetails.setSizeBOf(new Double(oceanFreightB));
        }
        if (ttB != null && !ttB.equals("")) {
            ftfDetails.setSizeBTt(new Double(ttB));
        }
        if (oceanFreightC != null && !oceanFreightC.equals("")) {
            ftfDetails.setSizeCOf(new Double(oceanFreightC));
        }
        if (ttc != null && !ttc.equals("")) {
            ftfDetails.setSizeCTt(new Double(ttc));
        }
        if (oceanFreightD != null && !oceanFreightD.equals("")) {
            ftfDetails.setSizeDOf(new Double(oceanFreightD));
        }
        if (ttd != null && !ttd.equals("")) {
            ftfDetails.setSizeDTt(new Double(ttd));
        }
        //session.setAttribute("lclColoadDetails",lclColoadDetails);
        if (addFTFDetailsForm.getTxtItemcreatedon() != null && addFTFDetailsForm.getTxtItemcreatedon() != "") {
            SimpleDateFormat sdf = new SimpleDateFormat(
                    "MM/dd/yyyy hh:mm aaa");
            SimpleDateFormat sdf1 = new SimpleDateFormat("hh:mm aaa");
            javaDate = sdf.parse(addFTFDetailsForm.getTxtItemcreatedon() + " " + sdf1.format(new Date()));
            ftfDetails.setEffectiveDate(javaDate);
        }
        User userId = null;
        if (session.getAttribute("loginuser") != null) {
            userId = (User) session.getAttribute("loginuser");
        }
        if (userId != null) {
            ftfDetails.setWhoChanged(userId.getLoginName());
        }
        if (buttonValue.equals("changemetric")) {
            airRatesBean.setMetric(metric);
            request.setAttribute("airRatesBean", airRatesBean);


        }
        session.setAttribute("ftfdetails", ftfDetails);


        return mapping.findForward("addftf");

    }
}
