/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package com.gp.cong.logisoft.struts.ratemangement.action;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

import com.gp.cong.logisoft.beans.AirRatesBean;
import com.gp.cong.logisoft.domain.LCLColoadDetails;
import com.gp.cong.logisoft.domain.User;
import com.gp.cong.logisoft.struts.ratemangement.form.AddLclColaodDetailsForm;

/** 
 * MyEclipse Struts
 * Creation date: 05-28-2008
 * 
 * XDoclet definition:
 * @struts.action path="/addLclColaodDetails" name="addLclColaodDetailsForm" input="/jsps/ratemanagement/AddLclColaodDetails.jsp" scope="request" validate="true"
 */
public class AddLclColaodDetailsAction extends Action {
    /*
     * Generated Methods
     */

    /**
     * Method execute
     * @param mapping
     * @param form
     * @param request
     * @param response
     * @return ActionForward
     */
    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response) throws Exception {
        AddLclColaodDetailsForm addLclColaodDetailsForm = (AddLclColaodDetailsForm) form;// TODO Auto-generated method stub
        List lclColoadList = new ArrayList();
        HttpSession session = ((HttpServletRequest) request).getSession();
        String buttonValue = addLclColaodDetailsForm.getButtonValue();
        String metric = addLclColaodDetailsForm.getMetric();
        String rate1000kgs = addLclColaodDetailsForm.getRate1000kgs();
        String rateCbm = addLclColaodDetailsForm.getRateCbm();
        String ofMinAmtMetric = addLclColaodDetailsForm.getOfMinAmtMetric();
        String ofMinAmtEnglish = addLclColaodDetailsForm.getOfMinAmtEnglish();
        String rate100 = addLclColaodDetailsForm.getRate100lb();
        String rateCft = addLclColaodDetailsForm.getRateCft();
        String oceanFreightA = addLclColaodDetailsForm.getOceanFreightA();
        String ttA = addLclColaodDetailsForm.getTtA();
        String oceanFreightB = addLclColaodDetailsForm.getOceanFreightB();
        String ttB = addLclColaodDetailsForm.getTtB();
        String oceanFreightC = addLclColaodDetailsForm.getOceanFreightC();
        String ttc = addLclColaodDetailsForm.getTtC();
        String oceanFreightD = addLclColaodDetailsForm.getOceanFreightD();
        String ttd = addLclColaodDetailsForm.getTtD();
        AirRatesBean airRatesBean = new AirRatesBean();
        LCLColoadDetails lclColoadDetails = null;

        if (session.getAttribute("lclcoloaddetails") != null) {
            lclColoadDetails = (LCLColoadDetails) session.getAttribute("lclcoloaddetails");

        } else {

            lclColoadDetails = new LCLColoadDetails();
        }
        lclColoadDetails.setMeasureType(metric);
        if (rate1000kgs != null && !rate1000kgs.equals("")) {
            lclColoadDetails.setMetric1000kg(new Double(rate1000kgs));
        }
        if (rateCbm != null && !rateCbm.equals("")) {
            lclColoadDetails.setMetricCbm(new Double(rateCbm));
        }
        if (ofMinAmtMetric != null && !ofMinAmtMetric.equals("")) {
            lclColoadDetails.setMetricOfMinamt(new Double(ofMinAmtMetric));
        }
        if (ofMinAmtEnglish != null && !ofMinAmtEnglish.equals("")) {
            lclColoadDetails.setEnglishOfMinamt(new Double(ofMinAmtEnglish));
        }
        if (rate100 != null && !rate100.equals("")) {
            lclColoadDetails.setEnglish100lb(new Double(rate100));
        }
        if (rateCft != null && !rateCft.equals("")) {
            lclColoadDetails.setEnglishCft(new Double(rateCft));
        }
        if (oceanFreightA != null && !oceanFreightA.equals("")) {
            lclColoadDetails.setSizeAOf(new Double(oceanFreightA));
        }
        if (ttA != null && !ttA.equals("")) {
            lclColoadDetails.setSizeATt(new Double(ttA));
        }
        if (oceanFreightB != null && !oceanFreightB.equals("")) {
            lclColoadDetails.setSizeBOf(new Double(oceanFreightB));
        }
        if (ttB != null && !ttB.equals("")) {
            lclColoadDetails.setSizeBTt(new Double(ttB));
        }
        if (oceanFreightC != null && !oceanFreightC.equals("")) {
            lclColoadDetails.setSizeCOf(new Double(oceanFreightC));
        }
        if (ttc != null && !ttc.equals("")) {
            lclColoadDetails.setSizeCTt(new Double(ttc));
        }
        if (oceanFreightD != null && !oceanFreightD.equals("")) {
            lclColoadDetails.setSizeDOf(new Double(oceanFreightD));
        }
        if (ttd != null && !ttd.equals("")) {
            lclColoadDetails.setSizeDTt(new Double(ttd));
        }
        //session.setAttribute("lclColoadDetails",lclColoadDetails);
        if (addLclColaodDetailsForm.getTxtItemcreatedon() != null && addLclColaodDetailsForm.getTxtItemcreatedon() != "") {
            java.util.Date javaDate = null;
            SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
            javaDate = sdf.parse(addLclColaodDetailsForm.getTxtItemcreatedon());
            lclColoadDetails.setEffectiveDate(javaDate);
        }
        User user = new User();
        if (session.getAttribute("loginuser") != null) {
            user = (User) session.getAttribute("loginuser");
        }
        lclColoadDetails.setWhoChanged(user.getLoginName());

        if (buttonValue.equals("changemetric")) {
            airRatesBean.setMetric(metric);
            request.setAttribute("airRatesBean", airRatesBean);
        }
        session.setAttribute("lclcoloaddetails", lclColoadDetails);

        if (buttonValue.equals("save")) {
            session.setAttribute("lclcoloaddetails", lclColoadDetails);
        }

        session.setAttribute("lclcoloaddetails", lclColoadDetails);
        return mapping.findForward("addlclcoload");
    }
}
